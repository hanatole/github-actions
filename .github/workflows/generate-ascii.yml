name: Generate ASCII Artwork
on: push
jobs:
  generate:
    name: Generate the file
    runs-on: ubuntu-24.04
    steps:
      - name: Install and execute Cowsay program
        run: |
          sudo apt-get install cowsay -y
          cowsay -f dragon "I'm the King Lion" >> lion.txt
      - name: Upload the artifact
        uses: actions/upload-artifact@v4
        with:
          name: my-artifact
          path: lion.txt
      - name: List content  of the repo
        run: ls -ltra
  test:
    name: Test the generated file
    runs-on: ubuntu-24.04
    needs: generate
    steps:
      - name: Download the artifact
        uses: actions/download-artifact@v5
        with:
          name: my-artifact
      - name: Make sure that the file is present
        run: test lion.txt
      - name: Display and test the content of the file
        run: |
          cat lion.txt
          cat lion.txt | grep "King Lion"
